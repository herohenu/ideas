<h1>Listing ideas</h1>

<table border="1">
  <thead>
  <tr>
    <th>Name</th>
    <th>Description</th>
    <th>Picture</th>
  </tr>
  </thead>

  <tbody>
  <% @ideas.each do |idea| %>
      <tr>
        <td><%= idea.name %></td>
        <td><%= idea.description %></td>
        <td>  <%= image_tag(idea.picture_url, :width => 200) if idea.picture.present? %></td>
        <td><%= link_to 'Show', idea %></td>
        <td><%= link_to 'Edit', edit_idea_path(idea) %></td>
        <td><%= link_to 'Destroy', idea, method: :delete, data: {confirm: 'Are you sure?'} %></td>

      </tr>
  <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Idea', new_idea_path %>


<table style="width:900px;">


  <% total = @ideas.count %>
  <% for i in 0.."#{ (@ideas.count)/3 +1 }".to_i %>
      <tr>
        <td>
          <% if  (i*3 +0) < total %>
              <%= image_tag(@ideas[i*3 +0].picture_url, :width => 200, :height => 140) if @ideas[i*3 +0].picture.present? %>
          <% else %>
              &nbsp;
          <% end %>

        </td>
        <td>
          <% if  (i*3 +1) < total %>
              <%#= @ideas[i*3 +1] %>
              <%= image_tag(@ideas[i*3 +1].picture_url, :width => 200, :height => 140) if @ideas[i*3 +1].picture.present? %>
          <% else %>
              &nbsp;
          <% end %>
        </td>

        <td>
          <% if  (i*3 +2) < total %>
              <%#= @ideas[i*3 +2] %>
              <%= image_tag(@ideas[i*3 +2].picture_url, :width => 200, :height => 140) if @ideas[i*3 +2].picture.present? %>
          <% else %>
              &nbsp;
          <% end %>
        </td>

      </tr>
  <% end %>


</table>

<hr color="red">
<table border="1">
  <!--用rails 生成  3行  4列-->
  <% provide(:total, @ideas.count) %>
  <% total = @ideas.count %>
  <% for i in 0..total %>
      <% if i %3 == 0 && i < total %>
          <tr>

            <td>
              <% if (i + 1) <= total %>
                  <%= i +1 %>
              <% else %>
                  &nbsp
              <% end %>
            </td>

            <td>
              <% if (i + 2) <= total %>
                  <%= i +2 %>
              <% else %>
                  &nbsp
              <% end %>
            </td>

            <% if (i + 3) <= total %>
                <td> <%= i +3 %> </td>
            <% else %>
                <td> &nbsp</td>
            <% end %>
          </tr>


      <% end %>
  <% end %>

</table>

